<html>
    
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="sample.css">
      </head>
      <body>
        <script src="https://www.gstatic.com/charts/loader.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script language="javascript" type="text/javascript">
          var blocks_epoch;
          var blocks_lifetime;
          var roa;
          var roa_lifetime;
          var luck_lifetime;
          var hist_roa = [];
          var chartVal =[]

          const url = 'https://js.adapools.org/pools/5c8751066db31d6745bc8a58ba1534de67a95f9962fc309b4673dd8c/summary.json';
          $.getJSON(url, (data) => {
            blocks_epoch=JSON.parse(data.data.blocks_epoch);
            blocks_lifetime=JSON.parse(data.data.blocks_lifetime);
            roa=JSON.parse(data.data.roa);
            roa_lifetime=JSON.parse(data.data.roa_lifetime);
            luck_lifetime=JSON.parse(data.data.luck_lifetime);

            hist_roa = JSON.parse(data.data.hist_roa);
            chartVal.push(['Epoch', 'ROA(%)'])
            for (let i=0; i<hist_roa.length; i++){
              chartVal.push([hist_roa[i].e, parseFloat(hist_roa[i].val)])
            };
            // console.log('Epoch Block: ' + blocks_epoch);
            // console.log('Lifetime Block: ' + blocks_lifetime);
            // console.log('ROA: ' + roa);
            // console.log('ROA Lifetime: ' + roa_lifetime);
            // console.log('Luck Lifetime: ' + luck_lifetime);
            // console.log(chartVal);

          });

        google.charts.load('current', {packages: ['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
          //オプション設定
          var options = {
            'title': 'ROA(%) / epoch',
            'legend': { position: 'bottom', maxLines: 3 },
            'width': 400,
            'height': 300,
            'animation.startup': true
          };
          
          //月別データ
          var data = google.visualization.arrayToDataTable(chartVal);
          var stage = document.getElementById('stage');
          
          //グラフの種類を設定
          var chart = new google.visualization.ColumnChart(stage);
          
          //データとオプションを設定
          chart.draw(data, options);
        }
        </script>
        <div id="stage" style="width: 80%; height: 400px;"></div>

      </body>

</html>